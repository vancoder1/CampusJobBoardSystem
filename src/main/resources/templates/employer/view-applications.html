<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header :: head-content}">
    <title>Campus Job Board</title>
</head>
<body class="d-flex flex-column min-vh-100">
<div th:replace="~{fragments/header :: navbar}"></div>

<div class="content-wrapper flex-grow-1">
    <div class="container mt-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h2>Applicants</h2>
            <p class="text-muted" th:if="${job != null}">
                For: <strong th:text="${job.title}">Job Title</strong>
            </p>
        </div>
        <a href="/employer/dashboard" class="btn btn-secondary">
            <i class="bi bi-arrow-left"></i> Back to My Jobs
        </a>
    </div>

    <div th:if="${#lists.isEmpty(applications)}" class="alert alert-info">
        <i class="bi bi-info-circle"></i> No applications have been submitted for this job yet.
    </div>

    <table th:if="${!#lists.isEmpty(applications)}" class="table table-bordered table-striped table-hover">
        <thead class="table-dark">
        <tr>
            <th>#</th>
            <th>Student Name</th>
            <th>Email</th>
            <th>Status</th>
            <th>Applied On</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="app, iterStat : ${applications}">
            <td th:text="${iterStat.count}"></td>
            <td th:text="${app.student.fullName}"></td>
            <td>
                <a th:href="'mailto:' + ${app.student.email}" th:text="${app.student.email}"></a>
            </td>
            <td>
                <span th:if="${app.status.name() == 'SUBMITTED'}" class="badge bg-primary">Submitted</span>
                <span th:if="${app.status.name() == 'ACCEPTED'}" class="badge bg-success">Accepted</span>
                <span th:if="${app.status.name() == 'REJECTED'}" class="badge bg-danger">Rejected</span>
            </td>
            <td th:text="${#temporals.format(app.appliedAt, 'MMM dd, yyyy HH:mm')}"></td>
        </tr>
        </tbody>
    </table>
    </div>
</div>

<div th:replace="~{fragments/footer :: footer}"></div>
</body>
</html>